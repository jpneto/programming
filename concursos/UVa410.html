<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
  <meta name="description" content="Greedy Algorithms">
  <title>UVa 410 - Algoritmos Gananciosos</title>
</head>

<body>

<h1 style="text-align: center;">UVa 410: Station Balance</h1>
<center><span style="font-size: small;"><em>João Pedro Neto</em></span></center>

<p>Leiam primeiro o <a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=351">enunciado do problema</a>.</p>
<p>Em cada caixa (<em>chamber</em>) podemos guardar até dois valores (<em>specimens</em>).</p>
<p>Vamos ter C caixas e S valores representados por um conjunto M. O S pode variar entre 1 e 2C.</p>
<p>Uma forma de simplificar o problema é assumir um número constante de 2C valores, usado zeros para preencher o resto.</p>
<p>Por exemplo, se C = 3 e M = {3,6,8,10}, ampliamos M para ter 2*C=6 valores, ie, M = {0,0,3,6,8,10}.</p>
<p>A técnica gananciosa neste caso é emparelhar o menor valor com o maior valor, o 2º menor com o 2º maior, e assim sucessivamente. Isto só funciona porque estamos a guardar no máximo dois valores por caixa.</p>
<p>Qualquer troca de valores iria aumentar as diferenças entre caixas e assim aumentar o factor de <em>imbalance</em> que pretendemos ser mínimo.</p>
<p>Uma solução possível do problema:</p>
<pre style="background-color: #ffffff; color: #000000; font-family: 'Courier New'; font-size: 9,0pt;"><span style="font-size: small;"><span style="color: #000080; font-weight: bold;">public class </span>UVa_410_StationBalance {</span><br /><br /><span style="font-size: small;">    <span style="color: #000080; font-weight: bold;">static double </span>computeImbalance(<span style="color: #000080; font-weight: bold;">int</span>[] chambers) {</span><br /><br /><span style="font-size: small;">        <span style="color: #000080; font-weight: bold;">double </span>avg = <span style="color: #0000ff;">0.0</span>;  <span style="color: #808080; font-style: italic;">// compute masses' average<br /></span><span style="color: #808080; font-style: italic;">        </span><span style="color: #000080; font-weight: bold;">for</span>(<span style="color: #000080; font-weight: bold;">int </span>i=<span style="color: #0000ff;">0</span>; i&lt;chambers.<span style="color: #660e7a; font-weight: bold;">length</span>; i++)</span><br /><span style="font-size: small;">            avg += chambers[i];</span><br /><span style="font-size: small;">        avg /= chambers.<span style="color: #660e7a; font-weight: bold;">length</span>;</span><br /><br /><span style="font-size: small;">        <span style="color: #000080; font-weight: bold;">double </span>imbalance = <span style="color: #0000ff;">0.0</span>;  <span style="color: #808080; font-style: italic;">// compute imbalance = \sum_i | chamber_i - avg |<br /></span><span style="color: #808080; font-style: italic;">        </span><span style="color: #000080; font-weight: bold;">for</span>(<span style="color: #000080; font-weight: bold;">int </span>i=<span style="color: #0000ff;">0</span>; i&lt;chambers.<span style="color: #660e7a; font-weight: bold;">length</span>; i++)</span><br /><span style="font-size: small;">            imbalance += Math.<span style="font-style: italic;">abs</span>(chambers[i] - avg);</span><br /><span style="font-size: small;">        <span style="color: #000080; font-weight: bold;">return </span>imbalance;</span><br /><span style="font-size: small;">    }</span></pre>
<p>Este primeiro método calcula o factor de <em>imbalance</em> descrito no enunciado, ie, a soma dos módulos das diferenças entre cada caixa e a média de valores armazenados nas caixas.</p>
<p>O restante código lê os dados, e para cada problem set, calcula a partição com a solução gananciosa e imprime o relatório pedido:</p>
<pre style="background-color: #ffffff; color: #000000; font-family: 'Courier New'; font-size: 9,0pt;"><span style="font-size: small;">   <span style="color: #000080; font-weight: bold;">public static void </span>main(String[] args) {</span><br /><br /><span style="font-size: small;"></span></pre>
<pre style="background-color: #ffffff; color: #000000; font-family: 'Courier New'; font-size: 9,0pt;"><span style="font-size: small;">        Scanner sc = <span style="color: #000080; font-weight: bold;">new </span>Scanner(System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">in</span>);</span><br /><br /><span style="font-size: small;">        <span style="color: #000080; font-weight: bold;">int </span>count_set = <span style="color: #0000ff;">0</span>;</span><br /><span style="font-size: small;">        <span style="color: #000080; font-weight: bold;">while </span>(sc.hasNext()) {</span><br /><span style="font-size: small;">            count_set++;</span><br /><br /><span style="font-size: small;">            <span style="color: #808080; font-style: italic;">// read data for each input set<br /></span><span style="color: #808080; font-style: italic;">            </span><span style="color: #000080; font-weight: bold;">int </span>C = sc.nextInt();</span><br /><span style="font-size: small;">            <span style="color: #000080; font-weight: bold;">int</span>[] chambers = <span style="color: #000080; font-weight: bold;">new int</span>[C];</span><br /><span style="font-size: small;">            <span style="color: #000080; font-weight: bold;">int</span>[] masses   = <span style="color: #000080; font-weight: bold;">new int</span>[<span style="color: #0000ff;">2</span>*C]; <span style="color: #808080; font-style: italic;">// already leaving the extra zeros<br /></span><span style="color: #808080; font-style: italic;"><br /></span><span style="color: #808080; font-style: italic;">            </span><span style="color: #000080; font-weight: bold;">int </span>S = sc.nextInt();</span><br /><span style="font-size: small;">            <span style="color: #000080; font-weight: bold;">for</span>(<span style="color: #000080; font-weight: bold;">int </span>i=<span style="color: #0000ff;">0</span>;i&lt;S; i++)</span><br /><span style="font-size: small;">                masses[i] = sc.nextInt();</span><br /><br /><span style="font-size: small;">            Arrays.<span style="font-style: italic;">sort</span>(masses);</span><br /><br /><span style="font-size: small;">            <span style="color: #808080; font-style: italic;">// the greedy solution<br /></span><span style="color: #808080; font-style: italic;">            </span><span style="color: #000080; font-weight: bold;">for</span>(<span style="color: #000080; font-weight: bold;">int </span>i=<span style="color: #0000ff;">0</span>; i&lt;masses.<span style="color: #660e7a; font-weight: bold;">length</span>/<span style="color: #0000ff;">2</span>; i++)</span><br /><span style="font-size: small;">                chambers[i] = masses[i] + masses[masses.<span style="color: #660e7a; font-weight: bold;">length</span>-i-<span style="color: #0000ff;">1</span>];</span><br /><br /><span style="font-size: small;">            <span style="color: #808080; font-style: italic;">// print report<br /></span><span style="color: #808080; font-style: italic;">            </span><span style="color: #000080; font-weight: bold;">if </span>(count_set&gt;<span style="color: #0000ff;">1</span>) System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">out</span>.println();</span><br /><span style="font-size: small;">            System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">out</span>.println(<span style="color: #008000; font-weight: bold;">"Set #" </span>+ count_set);</span><br /><span style="font-size: small;">            <span style="color: #000080; font-weight: bold;">for</span>(<span style="color: #000080; font-weight: bold;">int </span>i=<span style="color: #0000ff;">0</span>; i&lt;C; i++) {</span><br /><span style="font-size: small;">                System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">out</span>.print(<span style="color: #008000; font-weight: bold;">" " </span>+ i + <span style="color: #008000; font-weight: bold;">":"</span>);</span><br /><span style="font-size: small;">                <span style="color: #000080; font-weight: bold;">if </span>(masses[i] != <span style="color: #0000ff;">0</span>)</span><br /><span style="font-size: small;">                    System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">out</span>.print(<span style="color: #008000; font-weight: bold;">" " </span>+ masses[i]);</span><br /><span style="font-size: small;">                <span style="color: #000080; font-weight: bold;">if </span>(masses[masses.<span style="color: #660e7a; font-weight: bold;">length</span>-i-<span style="color: #0000ff;">1</span>] != <span style="color: #0000ff;">0</span>)</span><br /><span style="font-size: small;">                    System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">out</span>.print(<span style="color: #008000; font-weight: bold;">" " </span>+ masses[masses.<span style="color: #660e7a; font-weight: bold;">length</span>-i-<span style="color: #0000ff;">1</span>]);</span><br /><span style="font-size: small;">                System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">out</span>.println();</span><br /><span style="font-size: small;">            }</span><br /><span style="font-size: small;">            System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">out</span>.println(</span><br /><span style="font-size: small;">                    String.<span style="font-style: italic;">format</span>(<span style="color: #008000; font-weight: bold;">"IMBALANCE = %1.5f"</span>, <span style="font-style: italic;">computeImbalance</span>(chambers)));</span><br /><span style="font-size: small;">        }</span></pre>
<pre style="background-color: #ffffff; color: #000000; font-family: 'Courier New'; font-size: 9,0pt;"><span style="font-size: small;">        System.<span style="color: #660e7a; font-weight: bold; font-style: italic;">out</span>.println();<br />        sc.close();</span><br /><span style="font-size: small;">  }</span><br /><span style="font-size: small;">}</span></pre>
<pre style="background-color: #ffffff; color: #000000; font-family: 'Courier New'; font-size: 9,0pt;"><span style="font-size: small;"></span></pre>
<p>Um último detalhe: a especificação do <em>output</em> do enunciado é ambigua. Não se diz exactamente qual a ordem pela qual os valores devem ser colocados nas caixas, e não há informação suficiente nos exemplos para perceber essa ordem. Deste modo, esta solução não passa no UVa. Mas isto é resultado de um enunciado mal concebido, dado que os <em>imbalances</em> estão a ser corretamente calculados.</p></div></div><div class="modified">Last modified: Tuesday, 9 March 2021, 2:54 PM</div></div>

</body>
</html>